@model List<Codex.Models.User>

@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <link rel="icon" href="~/imagenes/Codex-Logo.png" />
    <link rel="stylesheet" href="~/css/admin.css" asp-append-version="true" />
    <title>Codex | Administración de Usuarios</title>
</head>
<body>

    <!-- HEADER -->
    <header class="header" id="header">
        <nav class="nav_container">

            <a href="@Url.Action("Index", "Home")" class="nav_logo">Codex</a>

            <div class="nav_menu" id="nav_menu">
                <ul class="nav_list">

                    <li>
                        <a href="#" class="nav_link">
                            <img src="~/imagenes/carro-de-la-carretilla.png" alt="Carrito" class="nav_icon" />
                        </a>
                    </li>

                    <li>
                        <a asp-controller="Favoritos" asp-action="Favoritos" class="nav_link">
                            <img src="~/imagenes/me-gusta.png" alt="Favoritos" class="nav_icon" />
                        </a>
                    </li>

                    <li>
                        <a asp-controller="Auth" asp-action="Auth" class="nav_link">
                            <img src="~/imagenes/usuario-extranjero (1).png" alt="Iniciar sesión" class="nav_icon" />
                        </a>
                    </li>

                </ul>
            </div>

        </nav>
    </header>

    <!--Mensaje de confirmación-->
    @if (TempData["Success"] != null)
    {
        <div id="successMessage" class="alert-success">
            @TempData["Success"]
        </div>
    }

    @if (TempData["Error"] != null)
    {
        <div id="errorMessage" class="alert-error">
            @TempData["Error"]
        </div>
    }

    <!-- CONTENIDO -->
    <div class="container">
        <div class="admin-container">

            <h2 class="title">Gestión de Usuarios</h2>

            <!-- BUSCADOR -->
            <div class="filter-row">
                <input type="text" id="searchInput" placeholder="Buscar..." class="input-search" />
            </div>

            <!-- TABLA -->
            <div class="table-container">
                <table class="table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Usuario</th>
                            <th>Tipo</th>
                            <th>Contraseña</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>

                    <tbody>
                        @foreach (var u in Model)
                        {
                            <tr>
                                <td>
                                    <input type="text" value="@u.IdUsers" readonly class="cell-input" />
                                </td>

                                <td>
                                    <input type="text" name="Username" value="@u.Username"
                                           class="cell-input" form="edit-@u.IdUsers" />
                                </td>

                                <td>
                                    <input type="number" name="IdType" value="@u.IdType"
                                           class="cell-input" form="edit-@u.IdUsers" />
                                </td>

                                <td>
                                    <input type="text" name="Password" value="@u.Password"
                                           class="cell-input" form="edit-@u.IdUsers" />
                                </td>

                                <td class="actions">

                                    <!-- EDITAR -->
                                    <form id="edit-@u.IdUsers" asp-action="Edit"
                                          asp-controller="UserAdmin" method="post" style="display:inline;">
                                        <input type="hidden" name="IdUsers" value="@u.IdUsers" />
                                        <button type="submit" id="btn-edit" class="btn-edit confirm-save">Editar</button>
                                    </form>

                                    <!-- ELIMINAR -->
                                    <form asp-action="Delete" asp-controller="UserAdmin"
                                          method="post" style="display:inline;">
                                        <input type="hidden" name="id" value="@u.IdUsers" />
                                        <button type="submit" id="btn-delete" class="btn-delete confirm-delete">Eliminar</button>
                                    </form>

                                </td>
                            </tr>
                        }
                    </tbody>

                </table>
            </div>

            <!-- MODAL -->
            <div id="confirmModal" class="modal-overlay" style="display:none;">
                <div class="modal-box">
                    <p id="modalMessage">¿Estás seguro?</p>

                    <div class="modal-buttons">
                        <button id="btnNo" class="modal-btn cancel">Cancelar</button>
                        <button id="btnYes" class="modal-btn accept">Aceptar</button>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2025 Codex | Panel de administración</p>
    </footer>

    <script src="~/js/admin.js"></script>
</body>
</html>
